import{o as $e,t as ge}from"../chunks/index.a306aac5.js";import{S as Fe,a as Me,I as C,g as je,f as Te,b as ye,c as le,s as F,d as Z,i as we,e as B,P as De,h as Ge}from"../chunks/singletons.b3a348bb.js";import{R as Ce,H as Q}from"../chunks/control.f5b05b5f.js";function Je(t,c){return t==="/"||c==="ignore"?t:c==="never"?t.endsWith("/")?t.slice(0,-1):t:c==="always"&&!t.endsWith("/")?t+"/":t}function Ye(t){return t.split("%25").map(decodeURI).join("%25")}function We(t){for(const c in t)t[c]=decodeURIComponent(t[c]);return t}const Xe=["href","pathname","search","searchParams","toString","toJSON"];function Ze(t,c){const p=new URL(t);for(const r of Xe)Object.defineProperty(p,r,{get(){return c(),t[r]},enumerable:!0,configurable:!0});return Qe(p),p}function Qe(t){Object.defineProperty(t,"hash",{get(){throw new Error("Cannot access event.url.hash. Consider using `$page.url.hash` inside a component instead")}})}const et="/__data.json";function tt(t){return t.replace(/\/$/,"")+et}function He(t){try{return JSON.parse(sessionStorage[t])}catch{}}function Ve(t,c){const p=JSON.stringify(c);try{sessionStorage[t]=p}catch{}}function nt(...t){let c=5381;for(const p of t)if(typeof p=="string"){let r=p.length;for(;r;)c=c*33^p.charCodeAt(--r)}else if(ArrayBuffer.isView(p)){const r=new Uint8Array(p.buffer,p.byteOffset,p.byteLength);let d=r.length;for(;d;)c=c*33^r[--d]}else throw new TypeError("value must be a string or TypedArray");return(c>>>0).toString(36)}const fe=window.fetch;window.fetch=(t,c)=>((t instanceof Request?t.method:c?.method||"GET")!=="GET"&&ee.delete(Se(t)),fe(t,c));const ee=new Map;function at(t,c){const p=Se(t,c),r=document.querySelector(p);if(r?.textContent){const{body:d,...l}=JSON.parse(r.textContent),S=r.getAttribute("data-ttl");return S&&ee.set(p,{body:d,init:l,ttl:1e3*Number(S)}),Promise.resolve(new Response(d,l))}return fe(t,c)}function rt(t,c,p){if(ee.size>0){const r=Se(t,p),d=ee.get(r);if(d){if(performance.now()<d.ttl&&["default","force-cache","only-if-cached",void 0].includes(p?.cache))return new Response(d.body,d.init);ee.delete(r)}}return fe(c,p)}function Se(t,c){let r=`script[data-sveltekit-fetched][data-url=${JSON.stringify(t instanceof Request?t.url:t)}]`;if(c?.headers||c?.body){const d=[];c.headers&&d.push([...new Headers(c.headers)].join(",")),c.body&&(typeof c.body=="string"||ArrayBuffer.isView(c.body))&&d.push(c.body),r+=`[data-hash="${nt(...d)}"]`}return r}const ot=/^(\[)?(\.\.\.)?(\w+)(?:=(\w+))?(\])?$/;function st(t){const c=[];return{pattern:t==="/"?/^\/$/:new RegExp(`^${ct(t).map(r=>{const d=/^\[\.\.\.(\w+)(?:=(\w+))?\]$/.exec(r);if(d)return c.push({name:d[1],matcher:d[2],optional:!1,rest:!0,chained:!0}),"(?:/(.*))?";const l=/^\[\[(\w+)(?:=(\w+))?\]\]$/.exec(r);if(l)return c.push({name:l[1],matcher:l[2],optional:!0,rest:!1,chained:!0}),"(?:/([^/]+))?";if(!r)return;const S=r.split(/\[(.+?)\](?!\])/);return"/"+S.map((w,g)=>{if(g%2){if(w.startsWith("x+"))return ve(String.fromCharCode(parseInt(w.slice(2),16)));if(w.startsWith("u+"))return ve(String.fromCharCode(...w.slice(2).split("-").map(T=>parseInt(T,16))));const u=ot.exec(w);if(!u)throw new Error(`Invalid param: ${w}. Params and matcher names can only have underscores and alphanumeric characters.`);const[,U,I,b,L]=u;return c.push({name:b,matcher:L,optional:!!U,rest:!!I,chained:I?g===1&&S[0]==="":!1}),I?"(.*?)":U?"([^/]*)?":"([^/]+?)"}return ve(w)}).join("")}).join("")}/?$`),params:c}}function it(t){return!/^\([^)]+\)$/.test(t)}function ct(t){return t.slice(1).split("/").filter(it)}function lt(t,c,p){const r={},d=t.slice(1);let l=0;for(let S=0;S<c.length;S+=1){const s=c[S],w=d[S-l];if(s.chained&&s.rest&&l){r[s.name]=d.slice(S-l,S+1).filter(g=>g).join("/"),l=0;continue}if(w===void 0){s.rest&&(r[s.name]="");continue}if(!s.matcher||p[s.matcher](w)){r[s.name]=w;const g=c[S+1],u=d[S+1];g&&!g.rest&&g.optional&&u&&(l=0);continue}if(s.optional&&s.chained){l++;continue}return}if(!l)return r}function ve(t){return t.normalize().replace(/[[\]]/g,"\\$&").replace(/%/g,"%25").replace(/\//g,"%2[Ff]").replace(/\?/g,"%3[Ff]").replace(/#/g,"%23").replace(/[.*+?^${}()|\\]/g,"\\$&")}function ft({nodes:t,server_loads:c,dictionary:p,matchers:r}){const d=new Set(c);return Object.entries(p).map(([s,[w,g,u]])=>{const{pattern:U,params:I}=st(s),b={id:s,exec:L=>{const T=U.exec(L);if(T)return lt(T,I,r)},errors:[1,...u||[]].map(L=>t[L]),layouts:[0,...g||[]].map(S),leaf:l(w)};return b.errors.length=b.layouts.length=Math.max(b.errors.length,b.layouts.length),b});function l(s){const w=s<0;return w&&(s=~s),[w,t[s]]}function S(s){return s===void 0?s:[d.has(s),t[s]]}}async function ut(t){for(const c in t)if(typeof t[c]?.then=="function")return Object.fromEntries(await Promise.all(Object.entries(t).map(async([p,r])=>[p,await r])));return t}const dt=-1,pt=-2,ht=-3,mt=-4,_t=-5,gt=-6;function yt(t,c){if(typeof t=="number")return d(t,!0);if(!Array.isArray(t)||t.length===0)throw new Error("Invalid input");const p=t,r=Array(p.length);function d(l,S=!1){if(l===dt)return;if(l===ht)return NaN;if(l===mt)return 1/0;if(l===_t)return-1/0;if(l===gt)return-0;if(S)throw new Error("Invalid input");if(l in r)return r[l];const s=p[l];if(!s||typeof s!="object")r[l]=s;else if(Array.isArray(s))if(typeof s[0]=="string"){const w=s[0],g=c?.[w];if(g)return r[l]=g(d(s[1]));switch(w){case"Date":r[l]=new Date(s[1]);break;case"Set":const u=new Set;r[l]=u;for(let b=1;b<s.length;b+=1)u.add(d(s[b]));break;case"Map":const U=new Map;r[l]=U;for(let b=1;b<s.length;b+=2)U.set(d(s[b]),d(s[b+1]));break;case"RegExp":r[l]=new RegExp(s[1],s[2]);break;case"Object":r[l]=Object(s[1]);break;case"BigInt":r[l]=BigInt(s[1]);break;case"null":const I=Object.create(null);r[l]=I;for(let b=1;b<s.length;b+=2)I[s[b]]=d(s[b+1]);break;default:throw new Error(`Unknown type ${w}`)}}else{const w=new Array(s.length);r[l]=w;for(let g=0;g<s.length;g+=1){const u=s[g];u!==pt&&(w[g]=d(u))}}else{const w={};r[l]=w;for(const g in s){const u=s[g];w[g]=d(u)}}return r[l]}return d(0)}const Be=new Set(["load","prerender","csr","ssr","trailingSlash","config"]);[...Be];const wt=new Set([...Be,"actions"]);[...wt];function vt(t){return t.filter(c=>c!=null)}const bt="x-sveltekit-invalidated",K=He(Fe)??{},X=He(Me)??{};function be(t){K[t]=Z()}function Et(t,c){const p=ft(t),r=t.nodes[0],d=t.nodes[1];r(),d();const l=document.documentElement,S=[],s=[];let w=null;const g={before_navigate:[],after_navigate:[]};let u={branch:[],error:null,url:null},U=!1,I=!1,b=!0,L=!1,T=!1,M=!1,H=!1,z,O=history.state?.[C];O||(O=Date.now(),history.replaceState({...history.state,[C]:O},"",location.href));const ue=K[O];ue&&(history.scrollRestoration="manual",scrollTo(ue.x,ue.y));let q,te,ne;async function ke(){ne=ne||Promise.resolve(),await ne,ne=null;const e=new URL(location.href),a=Y(e,!0);w=null;const n=te={},o=a&&await he(a);if(n===te&&o){if(o.type==="redirect")return ae(new URL(o.location,e).href,{},[e.pathname],n);o.props.page!==void 0&&(q=o.props.page),z.$set(o.props)}}function Re(e){s.some(a=>a?.snapshot)&&(X[e]=s.map(a=>a?.snapshot?.capture()))}function Ae(e){X[e]?.forEach((a,n)=>{s[n]?.snapshot?.restore(a)})}function Ie(){be(O),Ve(Fe,K),Re(O),Ve(Me,X)}async function ae(e,{noScroll:a=!1,replaceState:n=!1,keepFocus:o=!1,state:i={},invalidateAll:f=!1},m,v){return typeof e=="string"&&(e=new URL(e,je(document))),ie({url:e,scroll:a?Z():null,keepfocus:o,redirect_chain:m,details:{state:i,replaceState:n},nav_token:v,accepted:()=>{f&&(H=!0)},blocked:()=>{},type:"goto"})}async function Le(e){return w={id:e.id,promise:he(e).then(a=>(a.type==="loaded"&&a.state.error&&(w=null),a))},w.promise}async function re(...e){const n=p.filter(o=>e.some(i=>o.exec(i))).map(o=>Promise.all([...o.layouts,o.leaf].map(i=>i?.[1]())));await Promise.all(n)}function Oe(e){u=e.state;const a=document.querySelector("style[data-sveltekit]");a&&a.remove(),q=e.props.page,z=new t.root({target:c,props:{...e.props,stores:F,components:s},hydrate:!0}),Ae(O);const n={from:null,to:{params:u.params,route:{id:u.route?.id??null},url:new URL(location.href)},willUnload:!1,type:"enter"};g.after_navigate.forEach(o=>o(n)),I=!0}async function J({url:e,params:a,branch:n,status:o,error:i,route:f,form:m}){let v="never";for(const h of n)h?.slash!==void 0&&(v=h.slash);e.pathname=Je(e.pathname,v),e.search=e.search;const E={type:"loaded",state:{url:e,params:a,branch:n,error:i,route:f},props:{constructors:vt(n).map(h=>h.node.component)}};m!==void 0&&(E.props.form=m);let y={},A=!q,_=0;for(let h=0;h<Math.max(n.length,u.branch.length);h+=1){const P=n[h],V=u.branch[h];P?.data!==V?.data&&(A=!0),P&&(y={...y,...P.data},A&&(E.props[`data_${_}`]=y),_+=1)}return(!u.url||e.href!==u.url.href||u.error!==i||m!==void 0&&m!==q.form||A)&&(E.props.page={error:i,params:a,route:{id:f?.id??null},status:o,url:new URL(e),form:m??null,data:A?y:q.data}),E}async function de({loader:e,parent:a,url:n,params:o,route:i,server_data_node:f}){let m=null;const v={dependencies:new Set,params:new Set,parent:!1,route:!1,url:!1},E=await e();if(E.universal?.load){let y=function(..._){for(const k of _){const{href:h}=new URL(k,n);v.dependencies.add(h)}};const A={route:{get id(){return v.route=!0,i.id}},params:new Proxy(o,{get:(_,k)=>(v.params.add(k),_[k])}),data:f?.data??null,url:Ze(n,()=>{v.url=!0}),async fetch(_,k){let h;_ instanceof Request?(h=_.url,k={body:_.method==="GET"||_.method==="HEAD"?void 0:await _.blob(),cache:_.cache,credentials:_.credentials,headers:_.headers,integrity:_.integrity,keepalive:_.keepalive,method:_.method,mode:_.mode,redirect:_.redirect,referrer:_.referrer,referrerPolicy:_.referrerPolicy,signal:_.signal,...k}):h=_;const P=new URL(h,n);return y(P.href),P.origin===n.origin&&(h=P.href.slice(n.origin.length)),I?rt(h,P.href,k):at(h,k)},setHeaders:()=>{},depends:y,parent(){return v.parent=!0,a()}};m=await E.universal.load.call(null,A)??null,m=m?await ut(m):null}return{node:E,loader:e,server:f,universal:E.universal?.load?{type:"data",data:m,uses:v}:null,data:m??f?.data??null,slash:E.universal?.trailingSlash??f?.slash}}function Pe(e,a,n,o,i){if(H)return!0;if(!o)return!1;if(o.parent&&e||o.route&&a||o.url&&n)return!0;for(const f of o.params)if(i[f]!==u.params[f])return!0;for(const f of o.dependencies)if(S.some(m=>m(new URL(f))))return!0;return!1}function pe(e,a){return e?.type==="data"?e:e?.type==="skip"?a??null:null}async function he({id:e,invalidating:a,url:n,params:o,route:i}){if(w?.id===e)return w.promise;const{errors:f,layouts:m,leaf:v}=i,E=[...m,v];f.forEach(R=>R?.().catch(()=>{})),E.forEach(R=>R?.[1]().catch(()=>{}));let y=null;const A=u.url?e!==u.url.pathname+u.url.search:!1,_=u.route?i.id!==u.route.id:!1;let k=!1;const h=E.map((R,N)=>{const j=u.branch[N],$=!!R?.[0]&&(j?.loader!==R[1]||Pe(k,_,A,j.server?.uses,o));return $&&(k=!0),$});if(h.some(Boolean)){try{y=await qe(n,h)}catch(R){return oe({status:R instanceof Q?R.status:500,error:await W(R,{url:n,params:o,route:{id:i.id}}),url:n,route:i})}if(y.type==="redirect")return y}const P=y?.nodes;let V=!1;const x=E.map(async(R,N)=>{if(!R)return;const j=u.branch[N],$=P?.[N];if((!$||$.type==="skip")&&R[1]===j?.loader&&!Pe(V,_,A,j.universal?.uses,o))return j;if(V=!0,$?.type==="error")throw $;return de({loader:R[1],url:n,params:o,route:i,parent:async()=>{const me={};for(let _e=0;_e<N;_e+=1)Object.assign(me,(await x[_e])?.data);return me},server_data_node:pe($===void 0&&R[0]?{type:"skip"}:$??null,R[0]?j?.server:void 0)})});for(const R of x)R.catch(()=>{});const D=[];for(let R=0;R<E.length;R+=1)if(E[R])try{D.push(await x[R])}catch(N){if(N instanceof Ce)return{type:"redirect",location:N.location};let j=500,$;if(P?.includes(N))j=N.status??j,$=N.error;else if(N instanceof Q)j=N.status,$=N.body;else{if(await F.updated.check())return await G(n);$=await W(N,{params:o,url:n,route:{id:i.id}})}const ce=await Ue(R,D,f);return ce?await J({url:n,params:o,branch:D.slice(0,ce.idx).concat(ce.node),status:j,error:$,route:i}):await Ne(n,{id:i.id},$,j)}else D.push(void 0);return await J({url:n,params:o,branch:D,status:200,error:null,route:i,form:a?void 0:null})}async function Ue(e,a,n){for(;e--;)if(n[e]){let o=e;for(;!a[o];)o-=1;try{return{idx:o+1,node:{node:await n[e](),loader:n[e],data:{},server:null,universal:null}}}catch{continue}}}async function oe({status:e,error:a,url:n,route:o}){const i={};let f=null;if(t.server_loads[0]===0)try{const y=await qe(n,[!0]);if(y.type!=="data"||y.nodes[0]&&y.nodes[0].type!=="data")throw 0;f=y.nodes[0]??null}catch{(n.origin!==location.origin||n.pathname!==location.pathname||U)&&await G(n)}const v=await de({loader:r,url:n,params:i,route:o,parent:()=>Promise.resolve({}),server_data_node:pe(f)}),E={node:await d(),loader:d,universal:null,server:null,data:null};return await J({url:n,params:i,branch:[v,E],status:e,error:a,route:null})}function Y(e,a){if(we(e,B))return;const n=se(e);for(const o of p){const i=o.exec(n);if(i)return{id:e.pathname+e.search,invalidating:a,route:o,params:We(i),url:e}}}function se(e){return Ye(e.pathname.slice(B.length)||"/")}function xe({url:e,type:a,intent:n,delta:o}){let i=!1;const f={from:{params:u.params,route:{id:u.route?.id??null},url:u.url},to:{params:n?.params??null,route:{id:n?.route?.id??null},url:e},willUnload:!n,type:a};o!==void 0&&(f.delta=o);const m={...f,cancel:()=>{i=!0}};return T||g.before_navigate.forEach(v=>v(m)),i?null:f}async function ie({url:e,scroll:a,keepfocus:n,redirect_chain:o,details:i,type:f,delta:m,nav_token:v={},accepted:E,blocked:y}){const A=Y(e,!1),_=xe({url:e,type:f,delta:m,intent:A});if(!_){y();return}const k=O;E(),T=!0,I&&F.navigating.set(_),te=v;let h=A&&await he(A);if(!h){if(we(e,B))return await G(e);h=await Ne(e,{id:null},await W(new Error(`Not found: ${e.pathname}`),{url:e,params:{},route:{id:null}}),404)}if(e=A?.url||e,te!==v)return!1;if(h.type==="redirect")if(o.length>10||o.includes(e.pathname))h=await oe({status:500,error:await W(new Error("Redirect loop"),{url:e,params:{},route:{id:null}}),url:e,route:{id:null}});else return ae(new URL(h.location,e).href,{},[...o,e.pathname],v),!1;else h.props.page?.status>=400&&await F.updated.check()&&await G(e);if(S.length=0,H=!1,L=!0,be(k),Re(k),h.props.page?.url&&h.props.page.url.pathname!==e.pathname&&(e.pathname=h.props.page?.url.pathname),i){const x=i.replaceState?0:1;if(i.state[C]=O+=x,history[i.replaceState?"replaceState":"pushState"](i.state,"",e),!i.replaceState){let D=O+1;for(;X[D]||K[D];)delete X[D],delete K[D],D+=1}}w=null,I?(u=h.state,h.props.page&&(h.props.page.url=e),z.$set(h.props)):Oe(h);const{activeElement:P}=document;if(await ge(),b){const x=e.hash&&document.getElementById(decodeURIComponent(e.hash.slice(1)));a?scrollTo(a.x,a.y):x?x.scrollIntoView():scrollTo(0,0)}const V=document.activeElement!==P&&document.activeElement!==document.body;!n&&!V&&Ee(),b=!0,h.props.page&&(q=h.props.page),T=!1,f==="popstate"&&Ae(O),g.after_navigate.forEach(x=>x(_)),F.navigating.set(null),L=!1}async function Ne(e,a,n,o){return e.origin===location.origin&&e.pathname===location.pathname&&!U?await oe({status:o,error:n,url:e,route:a}):await G(e)}function G(e){return location.href=e.href,new Promise(()=>{})}function ze(){let e;l.addEventListener("mousemove",f=>{const m=f.target;clearTimeout(e),e=setTimeout(()=>{o(m,2)},20)});function a(f){o(f.composedPath()[0],1)}l.addEventListener("mousedown",a),l.addEventListener("touchstart",a,{passive:!0});const n=new IntersectionObserver(f=>{for(const m of f)m.isIntersecting&&(re(se(new URL(m.target.href))),n.unobserve(m.target))},{threshold:0});function o(f,m){const v=Te(f,l);if(!v)return;const{url:E,external:y,download:A}=ye(v,B);if(y||A)return;const _=le(v);if(!_.reload)if(m<=_.preload_data){const k=Y(E,!1);k&&Le(k)}else m<=_.preload_code&&re(se(E))}function i(){n.disconnect();for(const f of l.querySelectorAll("a")){const{url:m,external:v,download:E}=ye(f,B);if(v||E)continue;const y=le(f);y.reload||(y.preload_code===De.viewport&&n.observe(f),y.preload_code===De.eager&&re(se(m)))}}g.after_navigate.push(i),i()}function W(e,a){return e instanceof Q?e.body:t.hooks.handleError({error:e,event:a})??{message:a.route.id!=null?"Internal Error":"Not Found"}}return{after_navigate:e=>{$e(()=>(g.after_navigate.push(e),()=>{const a=g.after_navigate.indexOf(e);g.after_navigate.splice(a,1)}))},before_navigate:e=>{$e(()=>(g.before_navigate.push(e),()=>{const a=g.before_navigate.indexOf(e);g.before_navigate.splice(a,1)}))},disable_scroll_handling:()=>{(L||!I)&&(b=!1)},goto:(e,a={})=>ae(e,a,[]),invalidate:e=>{if(typeof e=="function")S.push(e);else{const{href:a}=new URL(e,location.href);S.push(n=>n.href===a)}return ke()},invalidate_all:()=>(H=!0,ke()),preload_data:async e=>{const a=new URL(e,je(document)),n=Y(a,!1);if(!n)throw new Error(`Attempted to preload a URL that does not belong to this app: ${a}`);await Le(n)},preload_code:re,apply_action:async e=>{if(e.type==="error"){const a=new URL(location.href),{branch:n,route:o}=u;if(!o)return;const i=await Ue(u.branch.length,n,o.errors);if(i){const f=await J({url:a,params:u.params,branch:n.slice(0,i.idx).concat(i.node),status:e.status??500,error:e.error,route:o});u=f.state,z.$set(f.props),ge().then(Ee)}}else e.type==="redirect"?ae(e.location,{invalidateAll:!0},[]):(z.$set({form:null,page:{...q,form:e.data,status:e.status}}),await ge(),z.$set({form:e.data}),e.type==="success"&&Ee())},_start_router:()=>{history.scrollRestoration="manual",addEventListener("beforeunload",e=>{let a=!1;if(Ie(),!T){const n={from:{params:u.params,route:{id:u.route?.id??null},url:u.url},to:null,willUnload:!0,type:"leave",cancel:()=>a=!0};g.before_navigate.forEach(o=>o(n))}a?(e.preventDefault(),e.returnValue=""):history.scrollRestoration="auto"}),addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"&&Ie()}),navigator.connection?.saveData||ze(),l.addEventListener("click",e=>{if(e.button||e.which!==1||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey||e.defaultPrevented)return;const a=Te(e.composedPath()[0],l);if(!a)return;const{url:n,external:o,target:i,download:f}=ye(a,B);if(!n)return;if(i==="_parent"||i==="_top"){if(window.parent!==window)return}else if(i&&i!=="_self")return;const m=le(a);if(!(a instanceof SVGAElement)&&n.protocol!==location.protocol&&!(n.protocol==="https:"||n.protocol==="http:")||f)return;if(o||m.reload){xe({url:n,type:"link"})?T=!0:e.preventDefault();return}const[E,y]=n.href.split("#");if(y!==void 0&&E===location.href.split("#")[0]){if(u.url.hash===n.hash){e.preventDefault(),a.ownerDocument.getElementById(y)?.scrollIntoView();return}if(M=!0,be(O),u.url=n,F.page.set({...q,url:n}),F.page.notify(),!m.replace_state)return;M=!1,e.preventDefault()}ie({url:n,scroll:m.noscroll?Z():null,keepfocus:m.keep_focus??!1,redirect_chain:[],details:{state:{},replaceState:m.replace_state??n.href===location.href},accepted:()=>e.preventDefault(),blocked:()=>e.preventDefault(),type:"link"})}),l.addEventListener("submit",e=>{if(e.defaultPrevented)return;const a=HTMLFormElement.prototype.cloneNode.call(e.target),n=e.submitter;if((n?.formMethod||a.method)!=="get")return;const i=new URL(n?.hasAttribute("formaction")&&n?.formAction||a.action);if(we(i,B))return;const f=e.target,{keep_focus:m,noscroll:v,reload:E,replace_state:y}=le(f);if(E)return;e.preventDefault(),e.stopPropagation();const A=new FormData(f),_=n?.getAttribute("name");_&&A.append(_,n?.getAttribute("value")??""),i.search=new URLSearchParams(A).toString(),ie({url:i,scroll:v?Z():null,keepfocus:m??!1,redirect_chain:[],details:{state:{},replaceState:y??i.href===location.href},nav_token:{},accepted:()=>{},blocked:()=>{},type:"form"})}),addEventListener("popstate",async e=>{if(e.state?.[C]){if(e.state[C]===O)return;const a=K[e.state[C]];if(u.url.href.split("#")[0]===location.href.split("#")[0]){K[O]=Z(),O=e.state[C],scrollTo(a.x,a.y);return}const n=e.state[C]-O;await ie({url:new URL(location.href),scroll:a,keepfocus:!1,redirect_chain:[],details:null,accepted:()=>{O=e.state[C]},blocked:()=>{history.go(-n)},type:"popstate",delta:n})}}),addEventListener("hashchange",()=>{M&&(M=!1,history.replaceState({...history.state,[C]:++O},"",location.href))});for(const e of document.querySelectorAll("link"))e.rel==="icon"&&(e.href=e.href);addEventListener("pageshow",e=>{e.persisted&&F.navigating.set(null)})},_hydrate:async({status:e=200,error:a,node_ids:n,params:o,route:i,data:f,form:m})=>{U=!0;const v=new URL(location.href);({params:o={},route:i={id:null}}=Y(v,!1)||{});let E;try{const y=n.map(async(k,h)=>{const P=f[h];return P?.uses&&(P.uses=Ke(P.uses)),de({loader:t.nodes[k],url:v,params:o,route:i,parent:async()=>{const V={};for(let x=0;x<h;x+=1)Object.assign(V,(await y[x]).data);return V},server_data_node:pe(P)})}),A=await Promise.all(y),_=p.find(({id:k})=>k===i.id);if(_){const k=_.layouts;for(let h=0;h<k.length;h++)k[h]||A.splice(h,0,void 0)}E=await J({url:v,params:o,branch:A,status:e,error:a,form:m,route:_??null})}catch(y){if(y instanceof Ce){await G(new URL(y.location,location.href));return}E=await oe({status:y instanceof Q?y.status:500,error:await W(y,{url:v,params:o,route:i}),url:v,route:i})}Oe(E)}}}async function qe(t,c){const p=new URL(t);p.pathname=tt(t.pathname),p.searchParams.append(bt,c.map(d=>d?"1":"0").join(""));const r=await fe(p.href);if(!r.ok)throw new Q(r.status,await r.json());return new Promise(async d=>{const l=new Map,S=r.body.getReader(),s=new TextDecoder;function w(u){return yt(u,{Promise:U=>new Promise((I,b)=>{l.set(U,{fulfil:I,reject:b})})})}let g="";for(;;){const{done:u,value:U}=await S.read();if(u&&!g)break;for(g+=!U&&g?`
`:s.decode(U);;){const I=g.indexOf(`
`);if(I===-1)break;const b=JSON.parse(g.slice(0,I));if(g=g.slice(I+1),b.type==="redirect")return d(b);if(b.type==="data")b.nodes?.forEach(L=>{L?.type==="data"&&(L.uses=Ke(L.uses),L.data=w(L.data))}),d(b);else if(b.type==="chunk"){const{id:L,data:T,error:M}=b,H=l.get(L);l.delete(L),M?H.reject(w(M)):H.fulfil(w(T))}}}})}function Ke(t){return{dependencies:new Set(t?.dependencies??[]),params:new Set(t?.params??[]),parent:!!t?.parent,route:!!t?.route,url:!!t?.url}}function Ee(){const t=document.querySelector("[autofocus]");if(t)t.focus();else{const c=document.body,p=c.getAttribute("tabindex");c.tabIndex=-1,c.focus({preventScroll:!0,focusVisible:!1}),p!==null?c.setAttribute("tabindex",p):c.removeAttribute("tabindex");const r=getSelection();if(r&&r.type!=="None"){const d=[];for(let l=0;l<r.rangeCount;l+=1)d.push(r.getRangeAt(l));setTimeout(()=>{if(r.rangeCount===d.length){for(let l=0;l<r.rangeCount;l+=1){const S=d[l],s=r.getRangeAt(l);if(S.commonAncestorContainer!==s.commonAncestorContainer||S.startContainer!==s.startContainer||S.endContainer!==s.endContainer||S.startOffset!==s.startOffset||S.endOffset!==s.endOffset)return}r.removeAllRanges()}})}}}async function At(t,c,p){const r=Et(t,c);Ge({client:r}),p?await r._hydrate(p):r.goto(location.href,{replaceState:!0}),r._start_router()}export{At as start};
